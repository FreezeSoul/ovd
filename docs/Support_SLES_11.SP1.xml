<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
                 "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"> 
<article xmlns:xi="http://www.w3.org/2001/XInclude">
  <articleinfo>
    <title>Ulteo Open Virtual Desktop</title>
    <subtitle>SUSE Linux Enterprise Server 11 SP1 support</subtitle>
    <graphic fileref="img/ovd.png" align="center"/>

    <copyright>
      <year>@YEAR@</year>
      <holder>Ulteo SAS - <ulink url="http://www.ulteo.com" /></holder>
    </copyright>
  </articleinfo>

  <para>
    The purpose of this document is to describe how the different
    pieces of Ulteo OVD are supported on SUSE Linux Enterprise Server
    (SLES) 11 SP1 system.
  </para>

  <section id="prerequisites">
    <title>Prerequisites: SUSE Linux Enterprise Server (SLES) 11 SP1</title>

    <xi:include href="Support_Debian_Squeeze.xml" xpointer="prerequisites_root" />

    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="warning_name_examples" />

    <simplesect id="seLinux">
      <title id="seLinux_title">SELinux</title>
      <para id="seLinux_para1">
        Ulteo OVD is not compatible with SELinux yet.
      </para>
      <para id="seLinux_para2">
        So please disable SELinux support:
      </para>
      <screen>
        <![CDATA[
# zypper remove selinux-policy]]>
      </screen>
    </simplesect>
  </section>

  <section id="repository">
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_title" />

    <para id="repository_para">
      SUSE systems use the RPM packaging system. So you need to have
      an internet connexion on your SUSE system and add an Ulteo RPM
      repository into your system.
    </para>

    <section id="repository_online">
      <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_online_title" />
      <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_online_para" />

      <itemizedlist>
        <listitem id="repository_online_step1">
          <para id="repository_online_step1_para">
            Add the ovd repository:
          </para>
          <screen>
	  <![CDATA[
# zypper ar http://archive.ulteo.com/ovd/3.0/sles/11_SP1 ovd]]>
          </screen>
        </listitem>

        <listitem id="repository_online_step2">
          <para>
            Install the keyring package to validate the repository
            using gpg:
          </para>
          <screen>
            <![CDATA[
# rpm --import http://archive.ulteo.com/ovd/keyring]]>
          </screen>
        </listitem>
      </itemizedlist>
    </section>

    <section id="repository_offline">
      <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_offline_title" />

      <itemizedlist>
        <listitem id="repository_offline_step1">
         <para>
           The offline repository is an archive named
           <emphasis>sles-11_sp1.tar.gz</emphasis>.
         </para>

         <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_offline_step1_para" />
       </listitem>

       <listitem id="repository_offline_step2">
         <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_offline_step2_para" />
          <screen>
            <![CDATA[
# tar xzf sles-11_sp1.tar.gz]]>
          </screen>
        </listitem>

        <listitem id="repository_offline_step3">
          <para id="repository_offline_step3_para">
            Add the ovd repository:
          </para>
          <screen>
            <![CDATA[
# zypper ar file:///root/sles-11_sp1 ovd-offline]]>
          </screen>
        </listitem>
     </itemizedlist>
    </section>

    <simplesect id="repository_common">
      <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_common_title" />

      <itemizedlist>
        <listitem>
          <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="repository_common_step1_para" />
          <screen>
	    <![CDATA[
# zypper refresh]]>
          </screen>
        </listitem>
      </itemizedlist>
    </simplesect>
  </section>


  <section id="sm">
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="sm_title" />
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="sm_first_para" />

    <section id="sql">
      <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="sql_title" />
      <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="sql_para" />

      <itemizedlist>
	<listitem>
	  <para>
	    Install the <emphasis>mysql</emphasis> package:
	  </para>
          <screen>
            <![CDATA[
# zypper install mysql]]>
          </screen>
        </listitem>

	<listitem>
	  <para>
	    To start automatically MySQL when the system boots up
	  </para>
	  <screen>
	    <![CDATA[
# chkconfig mysql on]]>
	  </screen>
	</listitem>

	<listitem>
	  <para>
	    Start the service
	  </para>
	  <screen>
	    <![CDATA[
# service mysql start]]>
	  </screen>
	</listitem>

	<listitem>
	  <para>
	    Define the root mysql password
	  </para>
	  <screen>
	    <![CDATA[
# mysqladmin -u root password 'mysql_root_password']]>
	  </screen>
	</listitem>

        <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="mysql_createdb" />
      </itemizedlist>
   </section>
   
   <section id="sm_install">
     <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="sm_install_title" />

     <itemizedlist>
       <listitem>
         <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="sm_install_package" />
         <screen><![CDATA[
# zypper install ulteo-ovd-session-manager]]>
         </screen>
       </listitem>

       <listitem>
         <para>Launch the configuration tool</para>
         <screen><![CDATA[
# sm-config
Admin login: admin
Password: 
Retype password: 
Chroot download url [http://www.ulteo.com/main/downloads/ulteo-ovd.php?suite=3.0]: 
Chroot destination [/var/cache/ulteo/sessionmanager/base.tar.gz]: 

Options:
* chroot download:  yes
* chroot URI:       http://www.ulteo.com/main/downloads/ulteo-ovd.php?suite=3.0
* chroot directory: /var/cache/ulteo/sessionmanager/base.tar.gz

Is this correct? [Y/n]]]>
         </screen>
       </listitem>

       <listitem>
         <para>Configure and start apache service</para>
         <screen><![CDATA[
# chkconfig apache2 on
# service apache2 restart]]>
         </screen>
       </listitem>
     </itemizedlist>
     
     <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="sm-config" />
   </section>
  </section>

  <section id="subsystem">
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="subsystem_title" />

    <itemizedlist>
      <listitem>
        <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="subsystem_package" />
        <screen><![CDATA[
# zypper install ulteo-ovd-subsystem]]>
        </screen>
      </listitem>

      <listitem>
        <para>Launch the configuration tool</para>
        <screen><![CDATA[
# ovd-subsystem-config 
Session Manager address : sm.ulteo.com
Chroot destination [/opt/ulteo]:]]>
        </screen>
        <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="subsystem-sm-warning" />
      </listitem>

       <listitem>
         <para>Configure and start apache service</para>
         <screen><![CDATA[
# chkconfig ulteo-ovd-subsystem on
# service ulteo-ovd-subsystem restart]]>
         </screen>
       </listitem>
    </itemizedlist>

    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="subsystem_last_para" />
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="subsystem_last_screenshot" />
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="aps_redirection_name" />
  </section>

  <section id="wc">
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="wc_title" />
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="wc_para_1" />
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="wc_para_2" />

    <itemizedlist>
      <listitem>
        <xi:include href="Support_Ubuntu_Hardy.xml" xpointer="wc_package" />
        <screen>
	  <![CDATA[
# zypper install ulteo-ovd-web-client ulteo-ovd-web-client-ajaxplorer]]>
        </screen>
      </listitem>
    </itemizedlist>

    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="wc_last_1" />
    <xi:include href="Support_Ubuntu_Lucid.xml" xpointer="wc_last_2" />
  </section>
</article>
