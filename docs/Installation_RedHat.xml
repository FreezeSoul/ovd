<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
                 "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"> 

<article xmlns:xi="http://www.w3.org/2001/XInclude">

  <articleinfo>
    <title>Installation documentation for Ulteo Open Virtual Desktop on Red Hat systems</title>
    <graphic fileref="img/ovd.png" align="center"/>

    <copyright>
      <year>2008</year>
      <year>2009</year>
      <holder>Ulteo SAS - <ulink url="http://www.ulteo.com" /></holder>
    </copyright>
  </articleinfo>

  <section>
    <title>Prerequisites</title>

    <xi:include href="sub/generic.xml" xpointer="prerequisites" />

    <para>
      Both servers needs to be installed with <emphasis role="strong">Red Hat RHEL 5.2 32-bit</emphasis>, <emphasis role="strong">Fedora Core 9</emphasis> or <emphasis role="strong">CentOS 5.2</emphasis>.
      All operations needs to be done as <emphasis>superuser</emphasis> (root).
    </para>


   <section>
      <title>Installation of MySQL</title>
      <para>
	If you don't have any available MySQL database, you have to install MySQL on your Session Manager.
      </para>

      <itemizedlist>
	<listitem>
	  <para>
	    Install the <emphasis>mysql-server</emphasis> package:
	  </para>
          <screen>
            <![CDATA[
# yum install mysql mysql-server]]>
          </screen>
        </listitem>

	<listitem>
	  <para>
	    To start automatically MySQL when the system boots up
	  </para>
	  <screen>
	    <![CDATA[
# chkconfig --levels 235 mysqld on]]>
	  </screen>
	</listitem>

	<listitem>
	  <para>
	    Start the service
	  </para>
	  <screen>
	    <![CDATA[
# service mysqld start]]>
	  </screen>
	</listitem>

	<listitem>
	  <para>
	    Define the root mysql password
	  </para>
	  <screen>
	    <![CDATA[
# mysqladmin -u root password 'mysql_root_password']]>
	  </screen>
	</listitem>


        <listitem>
          <para>Now log in mysql and create a database and an user who will have
          rights on the database:</para>
	  <screen>
	    <![CDATA[
# mysql -u root -p
Enter password:
mysql> create database ulteo_sm;
 Query OK, 1 row affected (0.02 sec)
mysql> exit]]>
	  </screen>
        </listitem>
      </itemizedlist>
      <beginpage />
    </section>
  </section>




  <section>
    <title>Session Manager (sm.ulteo.com)</title>
    <para>
      The Session Manager is the main server for your <emphasis>Ulteo Open Virtual Desktop infrastructure</emphasis>.
      It will manage all your application servers through an administration web interface.
    </para>

  <section>
    <title>Installation</title>

    <itemizedlist>
     <listitem>
	<para>
	  Download the Ulteo Open Virtual Desktop rpm packages from <ulink url="http://www.ulteo.com" />
	</para>
     </listitem>

     <listitem>
	<para>Install the <emphasis>ovd-session-manager</emphasis> package:</para>
        <screen>
	  <![CDATA[
# yum install --nogpgcheck ovd-session-manager-1.0~beta1.2.1.noarch.rpm]]>
	</screen>
      </listitem>

     <listitem>
       <para>Launch the configuration tool</para>
       <screen>
	 <![CDATA[
# sm-config
Admin login: admin
Password: 
Retype password: 
Chroot download url [http://www.ulteo.com/main/downloads/ulteo-ovd.php]:
Chroot destination [/usr/share/ulteo/sessionmanager/base.tar.gz]: 

Options:
* chroot download:  yes
* chroot URL:       http://www.ulteo.com/main/downloads/ulteo-ovd.php
* chroot directory: /usr/share/ulteo/sessionmanager/base.tar.gz
* apache group:     apache
* apache dir:       /etc/httpd/conf.d

Is this correct? [Y/n] ]]>
       </screen>
     </listitem>


     <listitem>
       <para>Configure and start apache service</para>
       <screen>
	 <![CDATA[
# chkconfig httpd on
# service httpd restart]]>
       </screen>
     </listitem>

    </itemizedlist>

    <para>
      The server is now installed but not configured yet. You have to open <ulink url="http://sm.ulteo.com/sessionmanager" /> with a web browser. It should display this page:
    </para>
    <para>
      <inlinemediaobject>
	<imageobject>
	  <imagedata fileref="img/sm_www_service_not_available.png"/>
	</imageobject>
	<textobject>
	  <phrase>Session Manager into a web browser</phrase>
	</textobject>
      </inlinemediaobject>
    </para>
  </section>


  <xi:include href="sub/generic.xml" xpointer="sessionmanager_configuration" />
  </section>

  <section>
    <title>Application Server installation (aps.ulteo.com)</title>

    <itemizedlist>
     <listitem>
	<para>
	  Download the Ulteo Open Virtual Desktop rpm packages from <ulink url="http://www.ulteo.com" />
	</para>
     </listitem>

     <listitem>
	<para>Intall the <emphasis>ovd-application-server</emphasis> package:</para>
        <screen>
	  <![CDATA[
# yum install --nogpgcheck ovd-application-server-1.0~beta1.2.1.noarch.rpm]]>
	</screen>
     </listitem>

     <listitem>
       <para>Launch the configuration tool</para>

       <important>
	 <para>
	   If you are going to install an Application server on the
	   same machine as your Session Manager, it's adviced to use:
	   <itemizedlist>
	     <listitem>
	       <para>FQDN: 127.0.0.1</para>
	     </listitem>
	     <listitem>
	       <para>SM URL: <ulink url="http://127.0.0.1/sessionmanager" /></para>
	     </listitem>
	   </itemizedlist>
	 </para>
       </important>

       <screen>
	 <![CDATA[
# as-chroot-install 
Full Qualified Domain Name [aps.ulteo.com]: aps.ulteo.com
Session Manager URL: http://sm.ulteo.com/sessionmanager
Chroot installation path: /opt/ulteo

Options:
* FQDN: aps.ulteo.com
* SM URL: http://sm.ulteo.com/sessionmanager
* chroot path: /opt/ulteo
* chroot download: yes
* apache group: apache
* apache dir: /etc/httpd/conf.d

Is this correct? [Y/n] ]]>
       </screen>
     </listitem>

     <listitem>
       <para>Configure and start apache service</para>
       <screen>
	 <![CDATA[
# chkconfig httpd on
# service httpd restart]]>
       </screen>
     </listitem>

     <listitem>
       <para>Configure and start Ulteo service</para>
       <screen>
	 <![CDATA[
# chkconfig ulteo-ovd on
# service ulteo-ovd restart]]>
       </screen>
     </listitem>

    </itemizedlist>

    <xi:include href="sub/generic.xml" xpointer="aps_manage_sm" />
    <beginpage />
  </section>

  <xi:include href="sub/generic.xml" xpointer="publication" />
  <xi:include href="sub/generic.xml" xpointer="launch_session" />

</article>
