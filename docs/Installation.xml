<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" 
	  "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<article xmlns:xi="http://www.w3.org/2001/XInclude">
  <articleinfo>
    <title>Installation documentation for Ulteo Open Virtual Desktop</title>
    <graphic fileref="img/ovd.png" align="center"/>

    <copyright>
      <year>2008</year>
      <year>2009</year>
      <holder>Ulteo SAS - <ulink url="http://www.ulteo.com" /></holder>
    </copyright>
  </articleinfo>

  <section>
    <title>Prerequisites</title>

    <xi:include href="sub/generic.xml" xpointer="prerequisites" />

    <para>
      Both servers need to be installed with <emphasis role="strong">Ubuntu 8.04.2 (Hardy Heron) Server for x86/32 bits</emphasis> (it can be downloaded from <ulink url="http://releases.ubuntu.com/8.04/ubuntu-8.04.2-server-i386.iso" />).
      All operations need to be done as <emphasis>super user</emphasis>.
    </para>

    <itemizedlist>
      <listitem>
	<para>To enable the root account:
	  <screen>
	    <![CDATA[
$ sudo passwd
$ su]]>
	  </screen>
	</para>
      </listitem>
    </itemizedlist>

    <section>
      <title>Installation of MySQL</title>
      <para>
	If you don't have any available MySQL database, you have to install MySQL on your Session Manager.
      </para>
      <itemizedlist>
	<listitem>
	  <para>Install the <emphasis>mysql-server</emphasis> package:</para>
          <screen># apt-get install mysql-server</screen>
          <para>A password for <literal>root</literal> will be asked.</para>
        </listitem>
        <listitem>
          <para>Now log in mysql and create a database:</para>
          <screen><![CDATA[
# mysql -u root -p
Enter password:
mysql> create database ulteo_sm;
 Query OK, 1 row affected (0.02 sec)
mysql> exit]]>
          </screen>
        </listitem>
      </itemizedlist>
      <beginpage />
    </section>
  </section>

  <section>
    <title>Session Manager (sm.ulteo.com)</title>
    <para>
      The Session Manager is the main server for your <emphasis>Ulteo Open Virtual Desktop infrastructure</emphasis>.
      It will manage all your application servers through an administration web interface.
    </para>

  <section>
    <title>Installation</title>

    <itemizedlist>
      <listitem>
	<para>
	  Add the Ulteo repository to the repository list:
	</para>
        <screen>
	  <![CDATA[
# echo "deb http://archive.ulteo.com/ulteo/ovd ovd-polaris main" >> /etc/apt/sources.list
# apt-get update]]>
	</screen>
      </listitem>
      <listitem>
	<para>Intall the <emphasis>ulteo-ovd-session-manager</emphasis> package:</para>
        <screen>
	  <![CDATA[
# apt-get install ulteo-ovd-session-manager]]>
	</screen>
      </listitem>

      <listitem>
	<para>
	  The installer asks for an admin login
	</para>
    	<para>
	  <inlinemediaobject>
	    <imageobject>
              <imagedata fileref="img/sm_install_admin_login.png"/>
	    </imageobject>
	    <textobject>
	      <phrase>Session Manager installation admin login</phrase>
	    </textobject>
	  </inlinemediaobject>
	</para>
	<beginpage />
      </listitem>

      <listitem>
	<para>
	  And a password:
	</para>
    	<para>
	  <inlinemediaobject>
	    <imageobject>
              <imagedata fileref="img/sm_install_admin_password.png"/>
	    </imageobject>
	    <textobject>
	      <phrase>Session Manager installation admin password</phrase>
	    </textobject>
	  </inlinemediaobject>
	</para>
      </listitem>

      <listitem>
	<para>
	  which has to be confirmed:
	</para>
    	<para>
	  <inlinemediaobject>
	    <imageobject>
              <imagedata fileref="img/sm_install_admin_confirm_password.png"/>
	    </imageobject>
	    <textobject>
	      <phrase>Session Manager installation admin password confirmation</phrase>
	    </textobject>
	  </inlinemediaobject>
	</para>
	<beginpage />
      </listitem>

      <listitem>
	<para>
	  Application servers are using an application system that will be the same for all your application servers:
	</para>
    	<para>
	  <inlinemediaobject>
	    <imageobject>
              <imagedata fileref="img/sm_install_chroot_location.png"/>
	    </imageobject>
	    <textobject>
	      <phrase>Session Manager installation application system archive</phrase>
	    </textobject>
	  </inlinemediaobject>
	</para>
	<para>
	If you don't have access to Internet, keep this field empty, 
	we'll see later how to install it by hand.
	</para>
      </listitem>
    </itemizedlist>

    <para>
      The server is now installed but not configured yet. You have to open <ulink url="http://sm.ulteo.com/sessionmanager" /> with a web browser.It should display this page:
    </para>
    <para>
      <inlinemediaobject>
	<imageobject>
	  <imagedata fileref="img/sm_www_service_not_available.png"/>
	</imageobject>
	<textobject>
	  <phrase>Session Manager into a web browser</phrase>
	</textobject>
      </inlinemediaobject>
    </para>



    <section>
      <title>Setup the application system archive</title>

      <para>
	If you didn't specify an URL at the last question, you have to copy an application system archive into <emphasis role="strong">/usr/share/ulteo/sessionmanager/base.tar.gz</emphasis>.
      </para>

      <para>
	For instance, you can download an arhive from <ulink url="http://www.ulteo.com/main/downloads/ulteo-ovd.php" /> from another computer which have access to Internet and copy it on a usb stick.
	Then, you have to copy it on the Session Manager at <emphasis>/usr/share/ulteo/sessionmanager/base.tar.gz</emphasis>
      </para>
      <beginpage />
    </section>

  </section>

  <xi:include href="sub/generic.xml" xpointer="sessionmanager_configuration" />
  </section>

  <section>
    <title>
      Application Server installation (aps.ulteo.com)
    </title>
    <itemizedlist>
      <listitem>
        <para>
	  Add the Ulteo repositoriy to the Ubuntu repository list:
        </para>
        <screen>
	  <![CDATA[
# echo "deb http://archive.ulteo.com/ulteo/ovd ovd-polaris main" >> /etc/apt/sources.list
# apt-get update]]>
        </screen>
      </listitem>
      <listitem>
        <para>
	  Install the package <emphasis>ulteo-ovd</emphasis>:
        </para>
        <screen>
	  <![CDATA[
# apt-get install ulteo-ovd]]>
	</screen>
      </listitem>

      <listitem>
        <para>
	  The first question is about the FQDN (Fully Qualified Domain Name) hostname of the machine you are using as an application server.
	  This <emphasis>FQDN</emphasis> is used by the session manager server to manage application servers.
	  If the FQDN is not defined well, this application server will never register on the Main server. 
	  Here we are using <emphasis>aps.ulteo.com</emphasis>:
	</para>

	<important>
	  <para>
	    If you are going to install an Application server on the
	    same machine as your Session Manager, it's adviced to use
	    <emphasis role="strong">127.0.0.1</emphasis> as FQDN.
	  </para>
	</important>

	<para>
	  <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/cm_install_fqdn.png"/>
            </imageobject>
            <textobject>
	      <phrase>debconf FQDN question</phrase>
            </textobject>
	  </inlinemediaobject>
        </para>
	<beginpage />
      </listitem>

      <listitem>
        <para>
	  The next question is about the URL/path where the session manager can be accessed.
	  Provide the URL that was used previously (we use <ulink url="http://sm.ulteo.com/sessionmanager" /> here for the example, but of course, you have to set your own domain name).
	</para>

	<important>
	  <para>
	    If you are going to install an Application server on the
	    same machine as your Session Manager, it's adviced to use
	    <emphasis role="strong"><ulink
	    url="http://127.0.0.1/sessionmanager" /></emphasis> as
	    URL.
	  </para>
	</important>

	<para>
          <inlinemediaobject>
            <imageobject>
              <imagedata fileref="img/cm_install_sm_url.png"/>
            </imageobject>
            <textobject>
              <phrase>debconf session manager base url question</phrase>
            </textobject>
          </inlinemediaobject>
        </para>
      </listitem>
      

 
    </itemizedlist>

    <para>
      The configuration is now done.
      The system is going to donwload and uncompress the application system archive from the Session Manager your registered.
    </para>
    <para>
      Once done, you just have to restart the service:
    </para>
    <screen>
      <![CDATA[
# /etc/init.d/ulteo-ovd restart]]>
    </screen>

    <xi:include href="sub/generic.xml" xpointer="aps_manage_sm" />
    <beginpage />
  </section>

  <xi:include href="sub/generic.xml" xpointer="publication" />
  <xi:include href="sub/generic.xml" xpointer="launch_session" />

</article>
