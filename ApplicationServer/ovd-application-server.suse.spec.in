Summary: Ulteo OVD - Application Server
Name: ovd-application-server
Version: @PKG_VERSION@
Release: 1
License: GPL2
Group: Applications/System
Source0: %{name}-%{version}.tar.gz
BuildArch: i386
BuildRequires: ovd-applets, libstdc++-devel, gcc-c++
Requires: apache2, apache2-mod_php5, curl, php5, php5-ldap, php5-mysql, php5-mbstring, php5-xmlwriter, php5-gettext, php5-curl, ovd-applets

%description
Ulteo OVD Application Server manages the sessions.

%prep
%setup -q

%build
./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --disable-daemon
make

%install
make DESTDIR=$RPM_BUILD_ROOT install
# install the logrotate example
mkdir -p $RPM_BUILD_ROOT/etc/logrotate.d
install -m 0644 examples/ulteo-as.logrotate $RPM_BUILD_ROOT/etc/logrotate.d/applicationserver
# install the init script
mkdir -p $RPM_BUILD_ROOT/etc/init.d
install -m 0755 examples/ulteo-ovd.init $RPM_BUILD_ROOT/etc/init.d/ulteo-ovd

%clean
rm -rf $RPM_BUILD_ROOT

%files
/usr/share/*
/usr/bin/aps-chroot
/usr/bin/aps-chroot-install
%defattr(4755,root,root)
/usr/bin/aps-shell
%config /etc/logrotate.d/applicationserver
%config /etc/ulteo/applicationserver/apache2.conf
%defattr(0755,root,root)
%config /etc/init.d/ulteo-ovd
%defattr(0770,wwwusr,root)
%config /etc/ulteo/applicationserver/dot.htaccess
%defattr(2770,wwwusr,root)
/var/log/ulteo/*
/var/spool/ulteo/*

%changelog
* Fri Jan 02 2009 Gauvain Pocentek <gauvain@ulteo.com> @PKG_VERSION@-1
- Initial release
